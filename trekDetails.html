<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Harishchandragad Trek</title>
<!-- Stylesheets -->
<link href="css/bootstrap.css" rel="stylesheet">
<link href="css/style.css" rel="stylesheet">
<link rel="shortcut icon" href="images/favicon.png" type="image/x-icon">
<link rel="icon" href="images/favicon.png" type="image/x-icon">
<!-- Responsive -->
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link href="css/responsive.css" rel="stylesheet">
<!--[if lt IE 9]><script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script><![endif]--> 



</head>


<body>
    <div class="page-wrapper"> 
    
      <!-- Preloader -->
      <div class="preloader"></div> 
      
      <div class="search-backdrop"></div>
      
       <!-- Main Header-->
    <header class="main-header">
      <div id="website_header"></div>
    </header>

       <!--Search Backdrop-->
       <div class="search-backdrop"></div>
          
       <!-- Menu Backdrop -->
       <div class="menu-backdrop"></div>
   
       <!-- Hidden Navigation Bar -->
       
       <!-- / Hidden Bar -->  
      
      <!--End Main Header -->

   
      <script src="js/common.js"></script>
     

    <!-- Banner Section -->
    <section class="packages-banner" style="background-image: url(images/background/banner-1.jpg);">
        <div class="auto-container">
          <ul class="banner-list">

            <h4 id="trekTitleHeading">Loading...</h4>

            <!-- New Rating Box -->
            <div class="custom-rating-box">
              <ul class="custom-post-info">
                <a href="#">
                    <li>
                        <div class="custom-icon">
                          <img src="images/icons/share-icon.svg" alt="Share" />
                        </div>
                        <div>Share</div>
                    </li>
                </a>
                <a href="#" id="dynamicPdfLink" target="_blank">
                  <li>
                  <div class="custom-icon">
                    <img src="images/icons/Download.svg" alt="Download PDF" />
                  </div>
                    <div>Download PDF</div>
                  </li>
                </a>
                <a href="#"><li>
                    <span class="custom-icon">
                    <img src="images/icons/heart-icon-1.svg" alt="Wishlist" />
                    </span>
                    Wishlist
                </li>
                </a>
              </ul>
          </div>
          
          <!-- End New Rating Box -->
          </ul>
		    </div>
    </section>
    <!--End Banner Section -->

	<!-- Package Detail Section -->
	<section class="package-detail-section">
		<div class="auto-container">

      <!-- Booking card section-->
      <div id="booking_now"></div>

      <!-- Dynamic Booking Price -->
      <div class="booking_now_price_pune" id="booking_now_price_pune" style="display: none;"></div>
      <!-- <div class="booking_now_price_mumbai" id="booking_now_price_mumbai" style="display: none;"></div> -->
			
			<div class="row clearfix">
				<!-- Content Column -->
				<div class="content-column col-xl-8 col-lg-7 col-md-12 col-sm-12">
                    <!-- <h5 id="booking_now_price_pune">loading...</h5> -->
                    <!-- <h5 id="booking_now_price_mumbai">loading...</h5> -->
                    <!-- <h6 id="booking_now_price_pune"></h6> -->
                    <!-- <h6 id="booking_now_price_mumbai"></h6> -->
					<h5>About <span id="trekTitleLabel">loading...</span></h5>
                    <div id="trekDescription">paragraph Loading...</div>
					 
                    <!-- Itinerary box-->
                    <div class="itinerary-box" id="itineraryBox">
                        <h5>Itinerary</h5>
                        <div class="faq-one style-two">
                        <div class="accordion-box clearfix" id="accordionBox"></div>
                        </div>
                    </div>
 
                  <!-- Costs -->
                  <div class="facility-box">
                    <h5>Costs</h5>
                    <table class="cost-table" id="costTable">
                      <thead>
                        <tr>
                            <th>City</th>
                            <th>Price</th>
                            <th>Contact</th>
                            <th>Book Now</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- <tr>
                          <td>Pune & Mumbai</td>
                          <td>₹22,499/-<br>Triple Sharing Room</td>
                          <td>₹20,499/-<br>Triple Sharing Room</td>
                          <td><a href="#" class="book-btn">Book Now</a></td>
                        </tr>
                        <tr>
                          <td>Pune & Mumbai</td>
                          <td>₹24,499/-<br>Double Sharing Room</td>
                          <td>₹22,499/-<br>Double Sharing Room</td>
                          <td><a href="#" class="book-btn">Book Now</a></td>
                        </tr>
                        <tr>
                          <td>Delhi</td>
                          <td>₹17,499/-<br>Triple Sharing Room</td>
                          <td>₹19,499/-<br>Double Sharing Room</td>
                          <td><a href="#" class="book-btn">Book Now</a></td>
                        </tr>
                        <tr>
                          <td colspan="4" style="text-align: center; font-weight: bold;">
                            Reach us for Best rates from other cities of Maharashtra
                          </td>
                        </tr> -->
                      </tbody>
                    </table>
                  </div>

    <!--  Inclusions -->
    <div class="feature-box">
      <h5>Inclusions</h5>
      <ul class="feature-list" id="inclusionList"></ul>
    </div>
      

    <!-- exclusion  -->
<div class="facility-box">
<h5>Exclusions</h5>
<ul class="feature-list" id="exclusionList"></ul>

</div>
	
        </div>

				<!-- Sidebar Column -->
				<div class="sidebar-column col-xl-4 col-lg-5 col-md-12 col-sm-12">
					<div class="inner-column">
				
					</div>
				</div>
</div>


			
		</div>
	</section>
	<!-- End Package Detail Section -->

    <script>
        // Function to get URL parameter by name
        // function getQueryParam(param) {
        //   const urlParams = new URLSearchParams(window.location.search);
        //   return urlParams.get(param);
        // }
      
        // const trekId = getQueryParam('id'); // Automatically fetches 'id' from URL
        const trekId = "678bf3779bb24f3a82c98ec1";// Static ID for test, replace dynamically as needed
      
        document.addEventListener('DOMContentLoaded', async () => {
          if (!trekId) return; // No ID found in URL
      
          const trekData = await fetchTrekById(trekId);
      
          if (trekData?.trekDetails) {
            const details = trekData.trekDetails;
      
            // Update the trek title
            const trekTitleElement = document.getElementById('trekTitle');
            const heading = document.getElementById('trekTitleHeading');
            const label = document.getElementById('trekTitleLabel');
            if (heading || label) {
                heading.textContent = `${details.title} Trek`;
                label.textContent = `${details.title} Trek`;
            }

            // Update the description dynamically
            const descriptionContainer = document.getElementById('trekDescription');
            if (descriptionContainer && details.description) {
            // Split description by line breaks and wrap each part in a <p> tag
            const paragraphs = details.description.split(/\r?\n/).filter(p => p.trim() !== '');
            descriptionContainer.innerHTML = paragraphs.map(p => `<p>${p.trim()}</p>`).join('');
            }

      
            // Update the PDF download link
            if (details.media?.pdfFile) {
              const pdfLink = document.getElementById('dynamicPdfLink');
              if (pdfLink) {
                pdfLink.setAttribute('href', details.media.pdfFile);
              }
            }

             // Update Booking Prices
             const punePriceElement = document.getElementById('booking_now_price_pune');
            const mumbaiPriceElement = document.getElementById('booking_now_price_mumbai');
            let punePrice = 0;
            let mumbaiPrice = 0;

            if (Array.isArray(details.costing)) {
                details.costing.forEach(item => {
                    const city = item.city.trim().toLowerCase();
                    const numericPrice = parseInt(item.price.replace(/\D/g, ''), 10);

                    if (city === 'pune' && punePriceElement) {
                        punePriceElement.textContent = numericPrice;
                        punePrice = numericPrice; // Already a number
                    }

                    if (city === 'mumbai' && mumbaiPriceElement) {
                        mumbaiPriceElement.textContent = numericPrice;
                        mumbaiPrice = numericPrice; // Already a number
                    }
                });
                // globally access variable 
            window.lowBookingPrice = Math.min(punePrice, mumbaiPrice);
            console.log("Lowest Booking Price: ", window.lowBookingPrice);
            }
            

            // JavaScript to populate inclusions
            const inclusionList = document.getElementById('inclusionList');
            if (Array.isArray(details.inclusions)) {
            details.inclusions.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                inclusionList.appendChild(li);
            });
            }

            // JavaScript to populate exclusions
                const exclusionList = document.getElementById('exclusionList');
                if (Array.isArray(details.exclusions)) {
                details.exclusions.forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    exclusionList.appendChild(li);
                });
                }

                // JavaScript to populate the table
                const costTableBody = document.querySelector('#costTable tbody');
                if (Array.isArray(details.costing)) {
                details.costing.forEach(item => {
                    const city = item.city.trim();
                    const price = item.price.trim();
                    const contact = item.contact.trim();

                    const row = document.createElement('tr');
                    row.innerHTML = `
                    <td>${city}</td>
                    <td>${price}</td>
                    <td>${contact}</td>
                    <td><a href="#" class="book-btn">Book Now</a></td>
                    `;
                    costTableBody.appendChild(row);
                });
                }
      
                // Assuming 'details.itinerary' contains the itinerary data from the API
                const itineraryData = details.itinerary;
                const accordionBox = document.getElementById('accordionBox');

                if (itineraryData && typeof itineraryData === 'object') {
                Object.keys(itineraryData).forEach((dayKey, index) => {
                    const dayItems = itineraryData[dayKey];
                    const dayNumber = index + 1;
                    const isActive = index === 0 ? 'active-block' : '';
                    const isBtnActive = index === 0 ? 'active' : '';

                    // Create the accordion block
                    const accordionBlock = document.createElement('div');
                    accordionBlock.className = `accordion block ${isActive}`;

                    // Create the accordion button
                    const accBtn = document.createElement('div');
                    accBtn.className = `acc-btn ${isBtnActive}`;
                    accBtn.innerHTML = `
                    <span class="d-flex gap-3">
                        <h6>Day ${dayNumber}:</h6>
                        <h6>${dayItems[0]}</h6>
                    </span>
                    <span><i class="fa-regular fa-angle-down"></i></span>
                    `;

                    // Create the accordion content
                    const accContent = document.createElement('div');
                    accContent.className = 'acc-content';
                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'content';

                    // Bold text for the first item
                    const boldText = document.createElement('div');
                    boldText.className = 'bold-text';
                    boldText.textContent = dayItems[0];
                    contentDiv.appendChild(boldText);

                    // List for the remaining items
                    const ul = document.createElement('ul');
                    dayItems.slice(1).forEach(item => {
                    const li = document.createElement('li');
                    li.textContent = item;
                    ul.appendChild(li);
                    });
                    contentDiv.appendChild(ul);
                    accContent.appendChild(contentDiv);

                    // Assemble the accordion block
                    accordionBlock.appendChild(accBtn);
                    accordionBlock.appendChild(accContent);

                    // Append to the accordion box
                    accordionBox.appendChild(accordionBlock);
                });
                }

            // Additional dynamic updates can be added here
          }
        });
      </script>

</div>
<!--End pagewrapper--> 

<!--Scroll to top-->
<div class="scroll-to-top scroll-to-target d-flex align-items-center justify-content-center rounded-circle bg-dark p-2 shadow" data-target="html" style="width: 50px; height: 50px;">
  <span class="icon">
      <img src="images/icons/arrow-up.svg" alt="" title="Go To Top" class="img-fluid">
  </span>
</div>

<script src="js/jquery.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery-ui.js"></script>
<script src="js/jquery.fancybox.js"></script>
<script src="js/bxslider.js"></script>
<script src="js/touchspin.js"></script>
<script src="js/owl.js"></script>
<script src="js/wow.js"></script>
<script src="js/custom-script.js"></script>
<script
    src="https://code.jquery.com/jquery-3.3.1.js"
    integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
    crossorigin="anonymous">
</script>
<script> 
  $(function(){
    $("#website_header").load("WebsiteHeader.html", function(){
            // AFTER loading header, initialize toggles!
            initHeaderScripts();
    });
    $("#footer").load("footer.html");
  

// Load BookingNow.html
$("#booking_now").load("BookingNow.html", function () {
  // Ensure the script inside BookingNow.html runs after loading
  setTimeout(() => {
    const bookingCard = document.querySelector(".booking-card");
    if (bookingCard) {
      bookingCard.classList.add("show");
    }

    // Set the dynamic price inside the loaded BookingNow.html
    document.querySelector(".booking-price-low").textContent = ` ₹${window.lowBookingPrice}`;
  }, 1500);

  
});
  });
  </script> 
  <script src="js/main.js"></script> <!-- Single JS file -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
    const accordions = document.querySelectorAll('.info-accordion-item');
  
    accordions.forEach(item => {
      const header = item.querySelector('.info-accordion-header');
  
      header.addEventListener('click', () => {
        const isActive = item.classList.contains('active');
  
        // Close all
        accordions.forEach(acc => acc.classList.remove('active'));
  
        // Toggle current based on previous state
        if (!isActive) {
          item.classList.add('active');
        }
      });
    });
  });
  
  </script>

  <!-- Gallery section script -->
<!-- Owl Carousel CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.carousel.min.css"/>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/assets/owl.theme.default.min.css"/>

<!-- jQuery + Owl Carousel JS -->
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/OwlCarousel2/2.3.4/owl.carousel.min.js"></script>
<script src="js/galleries.js"></script>
<!-- Gallery section script end-->  
</body>
</html>